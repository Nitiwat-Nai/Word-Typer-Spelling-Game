<!DOCTYPE html>
<html>
<head>
    <title>Word Typer: English Spelling Game</title>
    <style>
        /* ----------------------------------------------------------------- */
        /* --- CSS ‡∏´‡∏•‡∏±‡∏Å: ‡∏õ‡∏£‡∏±‡∏ö BODY ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏° CONTAINER ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Responsive --- */
        /* ----------------------------------------------------------------- */
        body {
            margin: 0;
            overflow-x: hidden;
            background-color: #f0f8ff; /* ‡∏™‡∏µ‡∏ü‡πâ‡∏≤‡∏≠‡πà‡∏≠‡∏ô */
            font-family: 'Arial', sans-serif;
            
            /* ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ body ‡∏à‡∏±‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á container */
            display: flex;
            justify-content: center; /* ‡∏à‡∏±‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô */
            align-items: flex-start; /* ‡∏à‡∏±‡∏î‡∏ä‡∏¥‡∏î‡∏Ç‡∏≠‡∏ö‡∏ö‡∏ô */
            min-height: 100vh; /* ‡πÉ‡∏´‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á body ‡∏™‡∏π‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠ */
        }

        .container {
            /* ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 500px) */
            width: 100%;
            max-width: 500px;
            min-height: 100vh;
            
            /* ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏†‡∏≤‡∏¢‡πÉ‡∏ô Container */
            background-color: #ffffff; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏ö‡πÄ‡∏Å‡∏° */
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2); 
            display: flex;
            flex-direction: column;
            align-items: center;
            box-sizing: border-box;
        }
        /* ----------------------------------------------------------------- */
        /* ----------------------------------------------------------------- */
        
        #gameTitle {
            font-size: 32px;
            font-weight: bold;
            color: #3f51b5; 
            margin: 10px 0;
            text-align: center;
        }
        #topBar {
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 10px 10px;
            box-sizing: border-box;
        }
        .score-box, .time-box, .control-btn {
            padding: 8px 10px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            transition: background-color 0.2s;
        }
        .score-box { background-color: #00bcd4; color: white; }
        .time-box { background-color: #ff9800; color: white; }
        .control-btn { background-color: #9c27b0; color: white; border: none; }
        .control-btn:hover { background-color: #7b1fa2; }

        #gameCanvas {
            border: 5px solid #3f51b5; 
            background-color: #fffacd; /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏Å‡∏°‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏≠‡πà‡∏≠‡∏ô */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            margin-bottom: 10px;
        }
        #inputBox {
            width: 95%;
            margin-bottom: 10px;
            text-align: center;
        }
        #currentInput {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            letter-spacing: 5px;
        }
        .typed-error {
            color: #f44336; 
            animation: flash 0.2s 3;
        }
        @keyframes flash { 0% { opacity: 1; } 50% { opacity: 0.2; } 100% { opacity: 1; } }

        /* Keyboard Styles */
        #virtualKeyboard {
            width: 98%;
            padding: 5px;
            background-color: #f0f0f0;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .keyboard-row {
            display: grid;
            gap: 5px;
            /* ‡πÉ‡∏ä‡πâ column count ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î QWERTY ‡πÉ‡∏´‡πâ‡∏•‡∏á‡∏ï‡∏±‡∏ß */
            grid-template-columns: repeat(auto-fit, minmax(25px, 1fr)); 
        }
        .key-button {
            background-color: #ffffff;
            color: #3f51b5;
            border: 2px solid #3f51b5;
            padding: 10px 0;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            user-select: none;
            transition: background-color 0.1s, transform 0.1s;
        }
        .key-button:active {
            background-color: #bbdefb; 
            transform: scale(0.95);
        }

        /* Menu Screen Styles */
        #menuScreen {
            position: absolute;
            top: 0;
            left: 0;
            /* ‡∏Ñ‡∏£‡∏≠‡∏ö container */
            width: 100%; 
            height: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }
        #levelButtonsContainer {
            display: grid;
            /* 5 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå */
            grid-template-columns: repeat(5, 1fr); 
            gap: 10px;
            padding: 10px;
        }
        .level-button {
            padding: 10px 5px;
            margin: 0;
            font-size: 14px;
            font-weight: bold;
            background-color: #4caf50; 
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 4px #388e3c;
            transition: background-color 0.2s;
        }
        .level-button:hover {
            background-color: #388e3c;
        }
    </style>
</head>
<body>
    
    <div class="container">
    
        <div id="gameTitle">
            üìù Word Typer Game
        </div>

        <div id="topBar" style="display: none;">
            <div class="score-box">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="scoreDisplay">0</span></div>
            <button id="pauseBtn" class="control-btn">‡∏´‡∏¢‡∏∏‡∏î/‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏•‡∏±‡∏Å</button>
            <div class="time-box">‡πÄ‡∏ß‡∏•‡∏≤: <span id="timeDisplay">0:00</span></div>
        </div>
        
        <div id="inputBox" style="display: none;">
            <span id="currentInput">‡∏£‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå...</span>
        </div>

        <canvas id="gameCanvas" width="360" height="640" style="display: none;"></canvas>

        <div id="virtualKeyboard" style="display: none;"></div>

        <div id="menuScreen">
            <h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏•‡πÄ‡∏ß‡∏• (1-10)</h2>
            <div id="levelButtonsContainer">
                </div>
        </div>
        
    </div> <script>
        // --- JavaScript Game Logic ---

        // 1. Setup Elements
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const timeDisplay = document.getElementById('timeDisplay');
        const currentInputDisplay = document.getElementById('currentInput');
        const topBar = document.getElementById('topBar');
        const inputBox = document.getElementById('inputBox');
        const virtualKeyboard = document.getElementById('virtualKeyboard');
        const menuScreen = document.getElementById('menuScreen');
        const pauseBtn = document.getElementById('pauseBtn');
        const levelButtonsContainer = document.getElementById('levelButtonsContainer');
        let gameLoopId;

        // ----------------------------------------------------
        // --- 1. WORD & LEVEL DATA (10 LEVELS x 10 UNIQUE WORDS) ---
        // ----------------------------------------------------
        
        // Level 1: ‡∏á‡πà‡∏≤‡∏¢, 4-6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
        const LEVEL_1_WORDS = [
            { icon: 'üçé', word: 'APPLE', meaning: '‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡∏•' },
            { icon: 'üéà', word: 'BALLOON', meaning: '‡∏•‡∏π‡∏Å‡πÇ‡∏õ‡πà‡∏á' },
            { icon: 'üåü', word: 'STAR', meaning: '‡∏î‡∏≤‡∏ß' },
            { icon: 'üê±', word: 'CAT', meaning: '‡πÅ‡∏°‡∏ß' },
            { icon: '‚òÄÔ∏è', word: 'SUN', meaning: '‡∏û‡∏£‡∏∞‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå' },
            { icon: 'üè†', word: 'HOUSE', meaning: '‡∏ö‡πâ‡∏≤‡∏ô' },
            { icon: 'üå≥', word: 'TREE', meaning: '‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ' },
            { icon: 'üöó', word: 'CAR', meaning: '‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå' },
            { icon: '‚öΩ', word: 'BALL', meaning: '‡∏•‡∏π‡∏Å‡∏ö‡∏≠‡∏•' },
            { icon: '‚úèÔ∏è', word: 'PEN', meaning: '‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤' },
        ];
        
        // Level 2: 5-7 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
        const LEVEL_2_WORDS = [
            { icon: 'üêò', word: 'ELEPHANT', meaning: '‡∏ä‡πâ‡∏≤‡∏á' },
            { icon: 'üêí', word: 'MONKEY', meaning: '‡∏•‡∏¥‡∏á' },
            { icon: 'üëë', word: 'CROWN', meaning: '‡∏°‡∏á‡∏Å‡∏∏‡∏é' },
            { icon: 'üé∏', word: 'GUITAR', meaning: '‡∏Å‡∏µ‡∏ï‡∏≤‡∏£‡πå' },
            { icon: 'üåä', word: 'OCEAN', meaning: '‡∏°‡∏´‡∏≤‡∏™‡∏°‡∏∏‡∏ó‡∏£' },
            { icon: 'üöÄ', word: 'ROCKET', meaning: '‡∏à‡∏£‡∏ß‡∏î' },
            { icon: 'üèîÔ∏è', word: 'MOUNTAIN', meaning: '‡∏†‡∏π‡πÄ‡∏Ç‡∏≤' },
            { icon: 'üï∞Ô∏è', word: 'CLOCK', meaning: '‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤' },
            { icon: 'üç™', word: 'COOKIE', meaning: '‡∏Ñ‡∏∏‡∏Å‡∏Å‡∏µ‡πâ' },
            { icon: '‚òÇÔ∏è', word: 'UMBRELLA', meaning: '‡∏£‡πà‡∏°' },
        ];

        // Level 3: 5-8 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
        const LEVEL_3_WORDS = [
            { icon: 'üöÅ', word: 'HELICOPTER', meaning: '‡πÄ‡∏Æ‡∏•‡∏¥‡∏Ñ‡∏≠‡∏õ‡πÄ‡∏ï‡∏≠‡∏£‡πå' },
            { icon: 'üåà', word: 'RAINBOW', meaning: '‡∏£‡∏∏‡πâ‡∏á' },
            { icon: 'üîë', word: 'KEYBOARD', meaning: '‡πÅ‡∏õ‡πâ‡∏ô‡∏û‡∏¥‡∏°‡∏û‡πå' },
            { icon: 'ü•ï', word: 'CARROT', meaning: '‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó' },
            { icon: 'üö™', word: 'DOOR', meaning: '‡∏õ‡∏£‡∏∞‡∏ï‡∏π' },
            { icon: 'üí°', word: 'BULB', meaning: '‡∏´‡∏•‡∏≠‡∏î‡πÑ‡∏ü' },
            { icon: 'üìû', word: 'PHONE', meaning: '‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå' },
            { icon: 'ü™ô', word: 'MONEY', meaning: '‡πÄ‡∏á‡∏¥‡∏ô' },
            { icon: 'ü¶¢', word: 'SWAN', meaning: '‡∏´‡∏á‡∏™‡πå' },
            { icon: 'üõµ', word: 'SCOOTER', meaning: '‡∏™‡∏Å‡∏π‡πä‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡πå' },
        ];
        
        // Level 4: 6-9 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
        const LEVEL_4_WORDS = [
            { icon: 'üè∞', word: 'CASTLE', meaning: '‡∏õ‡∏£‡∏≤‡∏™‡∏≤‡∏ó' },
            { icon: 'üíé', word: 'DIAMOND', meaning: '‡πÄ‡∏û‡∏ä‡∏£' },
            { icon: 'üéπ', word: 'PIANO', meaning: '‡πÄ‡∏õ‡∏µ‡∏¢‡πÇ‡∏ô' },
            { icon: 'üñºÔ∏è', word: 'PICTURE', meaning: '‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û' },
            { icon: 'ü•á', word: 'MEDAL', meaning: '‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç' },
            { icon: 'ü¶ä', word: 'FOX', meaning: '‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏à‡∏¥‡πâ‡∏á‡∏à‡∏≠‡∏Å' },
            { icon: 'üßä', word: 'ICE', meaning: '‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á' },
            { icon: 'üßÖ', word: 'ONION', meaning: '‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏°' },
            { icon: 'üêô', word: 'OCTOPUS', meaning: '‡∏õ‡∏•‡∏≤‡∏´‡∏°‡∏∂‡∏Å‡∏¢‡∏±‡∏Å‡∏©‡πå' },
            { icon: 'üß©', word: 'PUZZLE', meaning: '‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤' },
        ];

        // Level 5: 6-10 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
        const LEVEL_5_WORDS = [
            { icon: '‚õµ', word: 'SAILBOAT', meaning: '‡πÄ‡∏£‡∏∑‡∏≠‡πÉ‡∏ö' },
            { icon: 'üóø', word: 'STATUE', meaning: '‡∏£‡∏π‡∏õ‡∏õ‡∏±‡πâ‡∏ô' },
            { icon: 'üõéÔ∏è', word: 'BELL', meaning: '‡∏Å‡∏£‡∏∞‡∏î‡∏¥‡πà‡∏á' },
            { icon: 'üß±', word: 'BRICK', meaning: '‡∏≠‡∏¥‡∏ê' },
            { icon: 'üíª', word: 'COMPUTER', meaning: '‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå' },
            { icon: 'üî¶', word: 'FLASHLIGHT', meaning: '‡πÑ‡∏ü‡∏â‡∏≤‡∏¢' },
            { icon: 'üß≤', word: 'MAGNET', meaning: '‡πÅ‡∏°‡πà‡πÄ‡∏´‡∏•‡πá‡∏Å' },
            { icon: 'üìå', word: 'PIN', meaning: '‡∏´‡∏°‡∏∏‡∏î' },
            { icon: 'ü™ë', word: 'CHAIR', meaning: '‡πÄ‡∏Å‡πâ‡∏≤‡∏≠‡∏µ‡πâ' },
            { icon: 'ü™ú', word: 'LADDER', meaning: '‡∏ö‡∏±‡∏ô‡πÑ‡∏î' },
        ];

        // Level 6: 7-11 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
        const LEVEL_6_WORDS = [
            { icon: 'üêß', word: 'PENGUIN', meaning: '‡∏ô‡∏Å‡πÄ‡∏û‡∏ô‡∏Å‡∏ß‡∏¥‡∏ô' },
            { icon: 'ü¶í', word: 'GIRAFFE', meaning: '‡∏¢‡∏µ‡∏£‡∏≤‡∏ü' },
            { icon: 'ü¶ï', word: 'DINOSAUR', meaning: '‡πÑ‡∏î‡πÇ‡∏ô‡πÄ‡∏™‡∏≤‡∏£‡πå' },
            { icon: 'ü™°', word: 'NEEDLE', meaning: '‡πÄ‡∏Ç‡πá‡∏°' },
            { icon: 'ü™ñ', word: 'HELMET', meaning: '‡∏´‡∏°‡∏ß‡∏Å‡∏Å‡∏±‡∏ô‡∏ô‡πá‡∏≠‡∏Å' },
            { icon: 'ü™¶', word: 'GRAVE', meaning: '‡∏´‡∏•‡∏∏‡∏°‡∏ù‡∏±‡∏á‡∏®‡∏û' },
            { icon: 'ü™£', word: 'BUCKET', meaning: '‡∏ñ‡∏±‡∏á' },
            { icon: 'ü™§', word: 'TRAP', meaning: '‡∏Å‡∏±‡∏ö‡∏î‡∏±‡∏Å' },
            { icon: 'ü™†', word: 'PLUNGER', meaning: '‡∏•‡∏π‡∏Å‡∏¢‡∏≤‡∏á‡∏î‡∏π‡∏î‡∏™‡πâ‡∏ß‡∏°' },
            { icon: 'ü™ó', word: 'ACCORDION', meaning: '‡∏´‡∏µ‡∏ö‡πÄ‡∏û‡∏•‡∏á' },
        ];

        // Level 7: 8-12 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
        const LEVEL_7_WORDS = [
            { icon: 'üõ∏', word: 'UFO', meaning: '‡∏¢‡∏π‡πÄ‡∏≠‡∏ü‡πÇ‡∏≠' },
            { icon: 'üõ∞Ô∏è', word: 'SATELLITE', meaning: '‡∏î‡∏≤‡∏ß‡πÄ‡∏ó‡∏µ‡∏¢‡∏°' },
            { icon: 'üî≠', word: 'TELESCOPE', meaning: '‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÇ‡∏ó‡∏£‡∏ó‡∏£‡∏£‡∏®‡∏ô‡πå' },
            { icon: 'üß¨', word: 'DNA', meaning: '‡∏î‡∏µ‡πÄ‡∏≠‡πá‡∏ô‡πÄ‡∏≠' },
            { icon: 'üî¨', word: 'MICROSCOPE', meaning: '‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏à‡∏∏‡∏•‡∏ó‡∏£‡∏£‡∏®‡∏ô‡πå' },
            { icon: 'üß™', word: 'TESTTUBE', meaning: '‡∏´‡∏•‡∏≠‡∏î‡∏ó‡∏î‡∏•‡∏≠‡∏á' },
            { icon: 'üß´', word: 'PETRIDISH', meaning: '‡∏à‡∏≤‡∏ô‡πÄ‡∏û‡∏≤‡∏∞‡πÄ‡∏ä‡∏∑‡πâ‡∏≠' },
            { icon: 'ü¶†', word: 'GERM', meaning: '‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÇ‡∏£‡∏Ñ' },
            { icon: '‚öóÔ∏è', word: 'ALCHEMY', meaning: '‡πÄ‡∏•‡πà‡∏ô‡πÅ‡∏£‡πà‡πÅ‡∏õ‡∏£‡∏ò‡∏≤‡∏ï‡∏∏' },
            { icon: 'üß≤', word: 'MAGNETISM', meaning: '‡πÅ‡∏°‡πà‡πÄ‡∏´‡∏•‡πá‡∏Å‡πÑ‡∏ü‡∏ü‡πâ‡∏≤' },
        ];

        // Level 8: 9-13 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
        const LEVEL_8_WORDS = [
            { icon: 'üó≥Ô∏è', word: 'VOTE', meaning: '‡πÇ‡∏´‡∏ß‡∏ï' },
            { icon: 'üõçÔ∏è', word: 'SHOPPING', meaning: '‡∏ä‡πâ‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á' },
            { icon: 'üï∞Ô∏è', word: 'TIMEPIECE', meaning: '‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤' },
            { icon: 'üõí', word: 'CART', meaning: '‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤' },
            { icon: 'üí∏', word: 'PAYMENT', meaning: '‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô' },
            { icon: '‚úâÔ∏è', word: 'ENVELOPE', meaning: '‡∏ã‡∏≠‡∏á‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢' },
            { icon: 'üìÆ', word: 'POSTBOX', meaning: '‡∏ï‡∏π‡πâ‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå' },
            { icon: 'üì∞', word: 'NEWSPAPER', meaning: '‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå' },
            { icon: 'üîñ', word: 'BOOKMARK', meaning: '‡∏ó‡∏µ‡πà‡∏Ñ‡∏±‡πà‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠' },
            { icon: 'üìê', word: 'RULER', meaning: '‡πÑ‡∏°‡πâ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î' },
        ];

        // Level 9: 10-14 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
        const LEVEL_9_WORDS = [
            { icon: 'üó∫Ô∏è', word: 'MAP', meaning: '‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà' },
            { icon: 'üß≠', word: 'COMPASS', meaning: '‡πÄ‡∏Ç‡πá‡∏°‡∏ó‡∏¥‡∏®' },
            { icon: 'üèîÔ∏è', word: 'LANDSCAPE', meaning: '‡∏†‡∏π‡∏°‡∏¥‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®' },
            { icon: 'üèüÔ∏è', word: 'STADIUM', meaning: '‡∏™‡∏ô‡∏≤‡∏°‡∏Å‡∏µ‡∏¨‡∏≤' },
            { icon: 'üèõÔ∏è', word: 'TEMPLE', meaning: '‡∏ß‡∏±‡∏î/‡∏ß‡∏¥‡∏´‡∏≤‡∏£' },
            { icon: 'üèóÔ∏è', word: 'CONSTRUCTION', meaning: '‡∏Å‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á' },
            { icon: 'üè≠', word: 'FACTORY', meaning: '‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô' },
            { icon: 'üè¢', word: 'OFFICE', meaning: '‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô' },
            { icon: 'üè¨', word: 'DEPARTMENT', meaning: '‡∏´‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤' },
            { icon: 'üõ£Ô∏è', word: 'HIGHWAY', meaning: '‡∏ó‡∏≤‡∏á‡∏î‡πà‡∏ß‡∏ô' },
        ];

        // Level 10: ‡∏Ñ‡∏≥‡∏™‡∏±‡πâ‡∏ô ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 5 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ (‡∏á‡πà‡∏≤‡∏¢, ‡πÅ‡∏ï‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏Å‡∏°‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î)
        const LEVEL_10_WORDS = [
            { icon: 'ü¶ä', word: 'FOX', meaning: '‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏à‡∏¥‡πâ‡∏á‡∏à‡∏≠‡∏Å' },
            { icon: 'üêª', word: 'BEAR', meaning: '‡∏´‡∏°‡∏µ' },
            { icon: 'ü¶ã', word: 'FLY', meaning: '‡πÅ‡∏°‡∏•‡∏á‡∏ß‡∏±‡∏ô' },
            { icon: 'üê≠', word: 'MICE', meaning: '‡∏´‡∏ô‡∏π' },
            { icon: 'üêù', word: 'BEE', meaning: '‡∏ú‡∏∂‡πâ‡∏á' },
            { icon: 'üê∏', word: 'FROG', meaning: '‡∏Å‡∏ö' },
            { icon: 'üê†', word: 'FISH', meaning: '‡∏õ‡∏•‡∏≤' },
            { icon: 'üêö', word: 'SHELL', meaning: '‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏≠‡∏¢' },
            { icon: 'üíß', word: 'DROP', meaning: '‡∏´‡∏¢‡∏î‡∏ô‡πâ‡∏≥' },
            { icon: 'üî•', word: 'FIRE', meaning: '‡πÑ‡∏ü' },
        ];

        const ALL_LEVEL_WORDS = [
            LEVEL_1_WORDS, LEVEL_2_WORDS, LEVEL_3_WORDS, LEVEL_4_WORDS, LEVEL_5_WORDS,
            LEVEL_6_WORDS, LEVEL_7_WORDS, LEVEL_8_WORDS, LEVEL_9_WORDS, LEVEL_10_WORDS
        ];
        
        const DANGER_ZONE_Y = canvas.height - 100; 

        // ----------------------------------------------------
        // --- 2. GAME STATE & CONSTANTS ---
        // ----------------------------------------------------

        let score = 0;
        let startTime = 0;
        let runningTime = 0;
        let fallingIcons = [];
        let timeSinceLastDrop = 0;
        
        // **[‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç]: ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ä‡πâ‡∏≤‡∏•‡∏á (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å 180 ‡πÄ‡∏õ‡πá‡∏ô 210 frames)**
        const INITIAL_DROP_INTERVAL = 210; // 3.5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (210/60 FPS)
        
        let dropInterval = INITIAL_DROP_INTERVAL; 
        let isGameRunning = false;
        let currentLevel = 0; 
        let levelWords = []; 

        // ----------------------------------------------------
        // --- 3. CORE FUNCTIONS (Initialization & Flow) ---
        // ----------------------------------------------------

        function generateLevels() {
            levelButtonsContainer.innerHTML = ''; // Clear previous buttons
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏•‡πÄ‡∏ß‡∏• 1-10
            for (let i = 0; i < 10; i++) {
                const button = document.createElement('button');
                button.className = 'level-button';
                const wordCount = ALL_LEVEL_WORDS[i] ? ALL_LEVEL_WORDS[i].length : 0; 
                button.textContent = `L ${i + 1} (${wordCount})`;
                
                button.onclick = () => startGame(i);
                
                levelButtonsContainer.appendChild(button);
            }
        }
        
        function startGame(levelIndex) {
            currentLevel = levelIndex;
            // Shuffle words for the current level
            levelWords = [...ALL_LEVEL_WORDS[levelIndex]].sort(() => Math.random() - 0.5);
            
            // ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏ï‡∏≤‡∏°‡πÄ‡∏•‡πÄ‡∏ß‡∏•: Level 10 (index 9) ‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
            const speedFactor = levelIndex * 15; // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß 15 frame ‡∏ï‡πà‡∏≠‡πÄ‡∏•‡πÄ‡∏ß‡∏•
            dropInterval = INITIAL_DROP_INTERVAL - speedFactor; 
            if (dropInterval < 30) dropInterval = 30; // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (0.5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)

            // Reset State
            score = 0;
            startTime = Date.now();
            fallingIcons.length = 0;
            timeSinceLastDrop = 0;
            scoreDisplay.textContent = score;
            currentInputDisplay.textContent = '‡∏£‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå...';
            
            // Show Game Elements
            menuScreen.style.display = 'none';
            canvas.style.display = 'block';
            topBar.style.display = 'flex';
            inputBox.style.display = 'block';
            virtualKeyboard.style.display = 'flex'; 
            
            isGameRunning = true;
            if (!gameLoopId) {
                 gameLoop();
            }
        }

        function returnToMenu() {
            isGameRunning = false;
            fallingIcons.length = 0; 
            
            // Hide Game Elements
            canvas.style.display = 'none';
            topBar.style.display = 'none';
            inputBox.style.display = 'none';
            virtualKeyboard.style.display = 'none';
            menuScreen.style.display = 'flex';
        }

        // ----------------------------------------------------
        // --- 4. TEXT-TO-SPEECH (TTS) ---
        // ----------------------------------------------------

        function speakWord(word) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US'; 
                window.speechSynthesis.speak(utterance);
            } else {
                console.log("Text-to-Speech not supported in this browser.");
            }
        }

        // ----------------------------------------------------
        // --- 5. OBJECT FACTORY ---
        // ----------------------------------------------------

        function createWordIcon() {
            // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡∏à‡∏≤‡∏Å levelWords
            const wordData = levelWords[Math.floor(Math.random() * levelWords.length)];
            
            // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (Base speed) ‡∏à‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏•‡πÄ‡∏ß‡∏• 
            // Level 10 ‡∏à‡∏∞‡∏°‡∏µ Base Speed ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î ‡πÅ‡∏ï‡πà Drop Interval (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà) ‡∏ä‡πâ‡∏≤‡∏•‡∏á
            const baseSpeed = 1.5 + (currentLevel * 0.15);
            
            return {
                x: Math.random() * (canvas.width - 60) + 30,
                y: -50,
                icon: wordData.icon,
                targetWord: wordData.word.toUpperCase(),
                remainingLetters: wordData.word.toUpperCase(), 
                speed: baseSpeed, 
                isDestroying: false,
                destroyScale: 1,
                iconSize: 40,
                baseSpeed: baseSpeed
            };
        }

        // ----------------------------------------------------
        // --- 6. GAME LOGIC: UPDATE & DRAW ---
        // ----------------------------------------------------

        function update() {
            if (!isGameRunning) return;
            
            // Update Time
            runningTime = Date.now() - startTime;
            timeDisplay.textContent = formatTime(runningTime);

            // Icon Dropping Logic (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏¥‡∏î‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô)
            timeSinceLastDrop++;
            if (timeSinceLastDrop >= dropInterval) {
                // Ensure word list is not empty
                if (levelWords.length > 0) {
                    fallingIcons.push(createWordIcon());
                }
                timeSinceLastDrop = 0;
            }

            // Update Falling Icons
            for (let i = fallingIcons.length - 1; i >= 0; i--) {
                const icon = fallingIcons[i];

                if (icon.isDestroying) {
                    icon.destroyScale += 0.1;
                    icon.iconSize += 2;
                    if (icon.destroyScale > 2) {
                        fallingIcons.splice(i, 1); 
                    }
                } else {
                    if (icon.remainingLetters.length < icon.targetWord.length / 2) {
                         icon.speed = icon.baseSpeed * 1.2;
                    }

                    icon.y += icon.speed;

                    // Game Over Condition
                    if (icon.y + icon.iconSize / 2 > DANGER_ZONE_Y) {
                        alert(`Game Over! ‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ ${icon.targetWord} ‡∏ï‡∏Å‡∏ñ‡∏∂‡∏á‡πÄ‡∏Ç‡∏ï‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢!`);
                        returnToMenu();
                        return;
                    }
                }
            }
        }

        function draw() {
            if (!isGameRunning) return;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw Danger Zone
            ctx.strokeStyle = '#f44336'; 
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(0, DANGER_ZONE_Y);
            ctx.lineTo(canvas.width, DANGER_ZONE_Y);
            ctx.stroke();

            // Electric Effect 
            if (Math.floor(runningTime / 150) % 2 === 0) {
                ctx.fillStyle = 'rgba(255, 255, 0, 0.4)'; 
                ctx.fillRect(0, DANGER_ZONE_Y - 5, canvas.width, 10);
            }

            // Draw Falling Icons
            fallingIcons.forEach(icon => {
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';

                // 1. Draw Icon
                ctx.globalAlpha = icon.isDestroying ? 2 - icon.destroyScale : 1; 
                ctx.font = `${icon.iconSize}px Arial`;
                ctx.fillText(icon.icon, icon.x, icon.y);
                ctx.globalAlpha = 1;

                // 2. Draw Remaining Word (Navy Blue Text)
                if (!icon.isDestroying) {
                    ctx.font = '16px Arial';
                    ctx.fillStyle = '#1a237e'; 
                    ctx.fillText(icon.remainingLetters, icon.x, icon.y + icon.iconSize / 2 + 10);
                }
            });
        }

        // ----------------------------------------------------
        // --- 7. INPUT HANDLING & VIRTUAL KEYBOARD ---
        // ----------------------------------------------------
        
        // ‡πÅ‡∏õ‡πâ‡∏ô‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏™‡∏°‡∏∑‡∏≠‡∏ô‡∏à‡∏£‡∏¥‡∏á (‡∏à‡∏±‡∏î QWERTY)
        function createVirtualKeyboard() {
            const rows = [
                "QWERTYUIOP",
                "ASDFGHJKL",
                "ZXCVBNM"
            ];
            
            virtualKeyboard.innerHTML = ''; 

            rows.forEach(rowKeys => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'keyboard-row';
                
                for (let i = 0; i < rowKeys.length; i++) {
                    const key = rowKeys[i];
                    const button = document.createElement('button');
                    button.className = 'key-button';
                    button.textContent = key;
                    button.onclick = () => handleInput(key);
                    rowDiv.appendChild(button);
                }
                virtualKeyboard.appendChild(rowDiv);
            });
        }

        // ‡πÅ‡∏õ‡πâ‡∏ô‡∏û‡∏¥‡∏°‡∏û‡πå‡∏à‡∏£‡∏¥‡∏á
        document.addEventListener('keydown', (e) => {
            if (isGameRunning) {
                handleInput(e.key.toUpperCase());
            }
        });

        function handleInput(typedKey) {
            if (!isGameRunning || typedKey.length !== 1 || typedKey < 'A' || typedKey > 'Z') {
                return; 
            }
            
            let foundMatch = false;
            
            for (let i = 0; i < fallingIcons.length; i++) {
                const icon = fallingIcons[i];
                if (icon.isDestroying) continue;
                
                const matchIndex = icon.remainingLetters.indexOf(typedKey);
                
                if (matchIndex !== -1) {
                    foundMatch = true;
                    
                    // 1. Remove the letter
                    icon.remainingLetters = icon.remainingLetters.slice(0, matchIndex) + 
                                            icon.remainingLetters.slice(matchIndex + 1);
                    
                    // 2. Check for word completion
                    if (icon.remainingLetters.length === 0) {
                        score += 10 + Math.floor((DANGER_ZONE_Y - icon.y) / 10); 
                        scoreDisplay.textContent = score;
                        icon.isDestroying = true; 
                        
                        // 3. Speak the word!
                        speakWord(icon.targetWord); 
                    }
                    
                    // 4. Success Feedback
                    currentInputDisplay.textContent = typedKey;
                    
                    break; 
                }
            }
            
            if (!foundMatch) {
                // Error Feedback
                currentInputDisplay.textContent = typedKey;
                currentInputDisplay.classList.add('typed-error');
                setTimeout(() => {
                    currentInputDisplay.classList.remove('typed-error');
                    if (isGameRunning) currentInputDisplay.textContent = '‡∏£‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå...';
                }, 400);
            }
        }

        // ----------------------------------------------------
        // --- 8. HELPER FUNCTIONS & GAME LOOP ---
        // ----------------------------------------------------
        
        function formatTime(ms) {
            const totalSeconds = Math.floor(ms / 1000);
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        }
        
        // Control Button Handler
        pauseBtn.onclick = returnToMenu;

        function gameLoop() {
            if (isGameRunning) {
                update();
                draw();
            }
            gameLoopId = requestAnimationFrame(gameLoop); 
        }

        // Initialization 
        createVirtualKeyboard();
        generateLevels(); 
        gameLoop(); 
    </script>
</body>
</html>
